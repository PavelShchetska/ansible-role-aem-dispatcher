---
# file: tasks/configure.yml

- name: ensure that httpd.conf is correct
  template:
    src: httpd.conf.j2
    dest: '{{ httpdconffile }}'
    owner: '{{ webserveruser }}'
    group: '{{ webservergroup }}'
  notify:
  - restart httpd
  become: True
- meta: flush_handlers

- name: ensure that ssl.conf is correct
  template:
    src: ssl.conf.j2
    dest: '{{ sslconffile }}'
    owner: '{{ webserveruser }}'
    group: '{{ webservergroup }}'
  notify:
  - restart httpd
  when: webserverssl
- meta: flush_handlers

- name: ensure that directory for apache is ready
  file:
    path: '{{ apachedir }}'
    owner: '{{ webserveruser }}'
    group: '{{ webservergroup }}'
    recurse: True
    state: directory
  become: True