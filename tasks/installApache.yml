---
# file: tasks/install.yml

#- name: reinitialization of defaults as variables
#  set_fact:
#    apache_service: "{{ ( ansible_os_family == 'Debian' ) | ternary( 'apache2','httpd' ) }}"
#    apache_dir: "/etc/{{ ( ansible_os_family == 'Debian' ) | ternary( 'apache2','httpd' ) }}"
#    apache_packages:
#      - "{{ ( ansible_os_family == 'Debian' ) | ternary( 'apache2','httpd' ) }}"

- name: ensure that httpd web-server is installed
  become: true
  package:
    name: '{{ apache_packages }}'
    state: present
  register: installed_packages
  until: installed_packages is succeeded

- name: ensure that httpd is enabled
  service:
    name: '{{ apache_service }}'
    enabled: true
  become: true
